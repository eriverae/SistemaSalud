<div class="panel panel-default">
    <div class="page-title">
        <h2>Asociar beneficiarios a cotizante</h2>
    </div>
    <form name="BeneficiarioForm" class="form-horizontal" ng-submit="updateBeneficiario()" novalidate>
        <div class="col-md-6 col-xs-12" style="margin-bottom: 3em">
            <div class="panel-body">
                <!--Numero Id Cotizante -->
                <div class="form-group" ng-class="{'has-error' : BeneficiarioForm.identificacionCotizante.$invalid && BeneficiarioForm.identificacionCotizante.$dirty}">
                    <label class="col-md-3 col-xs-12 label-info control-label label label-form">Identificación:</label>
                    <!-- Display a check when the field is valid and was modified -->
                    <span ng-class="{'glyphicon glyphicon-ok' : BeneficiarioForm.identificacionCotizante.$valid && BeneficiarioForm.identificacionCotizante.$dirty}"></span>
                    <div class="col-md-6 col-xs-12">
                        <input id="identificacionCotizante" name="identificacionCotizante" type="number" class="form-control" maxlength="20"
                           ng-model="datosGenerales.cotizante.numeroIdentificacion" required ng-minlength="3" ng-maxlength="20"
                           placeholder="número de identificación"/>
                    </div>
                </div>

                <!-- Nombres -->
                <div class="form-group" ng-class="{'has-error' : BeneficiarioForm.nombresCotizante.$invalid && BeneficiarioForm.nombresCotizante.$dirty}">
                    <label class="col-md-3 col-xs-12 label-info control-label label label-form">Nombres:</label>
                    <!-- Display a check when the field is valid and was modified -->
                    <span ng-class="{'glyphicon glyphicon-ok' : BeneficiarioForm.nombresCotizante.$valid && BeneficiarioForm.nombresCotizante.$dirty}"></span>
                    <div class="col-md-6 col-xs-12">
                        <input id="nombres" name="nombresCotizante" type="text" class="form-control" maxlength="30"
                           ng-model="datosGenerales.cotizante.nombres" required ng-minlength="3" ng-maxlength="30"
                           placeholder="Nombres"/>
                    </div>
                </div>

                <!-- Apellidos -->
                <div class="form-group" ng-class="{'has-error' : BeneficiarioForm.apellidosCotizante.$invalid && BeneficiarioForm.apellidosCotizante.$dirty}">
                    <label class="col-md-3 col-xs-12 label-info control-label label label-form">Apellidos:</label>
                    <!-- Display a check when the field is valid and was modified -->
                    <span ng-class="{'glyphicon glyphicon-ok' : BeneficiarioForm.apellidosCotizante.$valid && BeneficiarioForm.apellidosCotizante.$dirty}"></span>
                    <div class="col-md-6 col-xs-12">
                        <input id="apellidos" name="apellidosCotizante" type="text" class="form-control" maxlength="30"
                           ng-model="datosGenerales.cotizante.apellidos" required ng-minlength="3" ng-maxlength="30"
                           placeholder="Apellidos"/>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-xs-12" style="margin-bottom: 3em">
            <!--Filtro -->
            <div class="panel-heading">
                <h4>Buscar beneficiarios</h4>
                <div class="col-xs-4">
                    <label class="col-md-3 col-xs-12 label-info control-label label label-form">Número identificación:</label>
                    <div class="col-md-6 col-xs-12">
                        <input type="text" data-ng-model="numeroIdBeneficiario" />
                    </div>
                </div>  
                <button type="button" class="btn btn-primary" ng-click="buscarBeneficiario()">Buscar 
                    <span class="glyphicon glyphicon-floppy-remove"></span>
                </button>
                <!--<a ui-sref="registroPacientes"><span class="glyphicon glyphicon-plus"></span>Agregar Beneficiario</a>-->
            </div>

            <!--Se consulta la identificacion del beneficiario, sino existe se direcciona a crear nueva persona natural
            si existe trae el Numero de Identificacion, el nombre y apellido del beneficiario 
            ESTOS CAMPOS NO SON MODIFICABLES deberian ser de tipo LABEL-->
            <!--Numero Id Beneficiario -->
            <div class="form-group" ng-class="{'has-error' : BeneficiarioForm.identificacionBeneficiario.$invalid && BeneficiarioForm.identificacionBeneficiario.$dirty}">
                <label class="col-md-3 col-xs-12 label-info control-label label label-form">Identificacion:</label>
                <!-- Display a check when the field is valid and was modified -->
                <span ng-class="{'glyphicon glyphicon-ok' : BeneficiarioForm.identificacionBeneficiario.$valid && BeneficiarioForm.identificacionBeneficiario.$dirty}"></span>
                <div class="col-md-6 col-xs-12">
                    <input id="identificacionCotizante" name="identificacionBeneficiario" type="number" class="form-control" maxlength="20"
                       ng-model="datosGenerales.beneficiario.numeroIdentificacion" required ng-minlength="3" ng-maxlength="20"
                       placeholder="Número de identificación"/>
                </div>
            </div>

            <!-- Nombres -->
            <div class="form-group" ng-class="{'has-error' : BeneficiarioForm.nombresBeneficiario.$invalid && BeneficiarioForm.nombresBeneficiario.$dirty}">
                <label class="col-md-3 col-xs-12 label-info control-label label label-form">Nombres:</label>
                <!-- Display a check when the field is valid and was modified -->
                <span ng-class="{'glyphicon glyphicon-ok' : BeneficiarioForm.nombresBeneficiario.$valid && BeneficiarioForm.nombresBeneficiario.$dirty}"></span>
                <div class="col-md-6 col-xs-12">
                    <input id="nombres" name="nombresBeneficiario" type="text" class="form-control" maxlength="30"
                       ng-model="datosGenerales.beneficiario.nombres" required ng-minlength="3" ng-maxlength="30"
                       placeholder="Nombres"/>
                </div>
            </div>

            <!-- Apellidos -->
            <div class="form-group" ng-class="{'has-error' : BeneficiarioForm.apellidosBeneficiario.$invalid && BeneficiarioForm.apellidosBeneficiario.$dirty}">
                <label class="col-md-3 col-xs-12 label-info control-label label label-form">Apellidos:</label>
                <!-- Display a check when the field is valid and was modified -->
                <span ng-class="{'glyphicon glyphicon-ok' : BeneficiarioForm.apellidosBeneficiario.$valid && BeneficiarioForm.apellidosBeneficiario.$dirty}"></span>
                <div class="col-md-6 col-xs-12">
                    <input id="apellidos" name="apellidosBeneficiario" type="text" class="form-control" maxlength="30"
                       ng-model="datosGenerales.beneficiario.apellidos" required ng-minlength="3" ng-maxlength="30"
                       placeholder="Apellidos"/>
                </div>
            </div>

            <!--Parentezco-->
            <div class="form-group" ng-class="{'has-error' : BeneficiarioForm.parentezco.$invalid && BeneficiarioForm.parentezco.$dirty}">
                <label class="col-md-3 col-xs-12 label-info control-label label label-form">Parentezco</label>
                <!-- Display a check when the field is valid and was modified -->
                <span ng-class="{'glyphicon glyphicon-ok' : BeneficiarioForm.parentezco.$valid && BeneficiarioForm.parentezco.$dirty}"></span>
                <div class="col-md-6 col-xs-12">
                    <select name="parentezco" id="parentezco" ng-model="beneficiario.parentezco" required>
                        <option ng-repeat="option in listaTiposParentezco" value="{{option.id}}">{{option.name}}</option>
                    </select>
                </div>                
                <!--
                <p class="help-block" ng-show="BeneficiarioForm.IdType.$error.required">Seleccione tipo de parentezco</p>
                -->
            </div> 
            <button type="button" class="btn btn-primary" ng-click="asociarBeneficiario()">Asociar 
                <span class="glyphicon glyphicon-floppy-remove"></span>
            </button>
        </div>
        <div class="md-col-11">
            <!--Si al consultar el cliente tiene beneficiarios asociados debe listarlos - CRUD-->
            <div class="grid">
                <div>
                    <h3>Lista de Beneficiarios</h3>
                </div>
                <!-- Binds the grid component to be displayed. -->
                <div class="gridStyle" ng-grid="gridOptions"></div>

                <!--  Bind the pagination component to be displayed. -->
                <pagination direction-links="true" boundary-links="true"
                            total-items="beneficiarios.totalResults" items-per-page="beneficiarios.pageSize"
                            ng-model="usuarios.currentPage" ng-change="refreshGrid()">
                </pagination>
            </div>
        </div>
        <!--Boton guardar solo se lleva el ID del cotizante, ID del beneficiario y Parentezco -->
        <!-- Form buttons. The 'Save' button is only enabled when the form is valid. -->
        <div class="buttons">
            <button type="button" class="btn btn-primary" ng-click="cancelar()">Cancelar</button>
            <button type="submit" class="btn btn-primary" ng-disabled="BeneficiarioForm.$invalid">Guardar</button>
        </div>
    </form>    
</div>